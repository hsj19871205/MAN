webpackJsonp([14],{"/Gvn":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("yJFt"),i=a("0BaK"),o=a("1onU"),s=a("kVYb"),l={data:function(){return{time:"",activeNames:["1"],countNum:{free:0,online:0,expire:0,fault:0,start:0,groupControl:0},phoneNumType:{index:0,list:[{id:"0",value:"空闲云机数"},{id:"1",value:"在线云机数"},{id:"2",value:"到期云机数"},{id:"3",value:"故障云机数"},{id:"4",value:"启动云机数"},{id:"5",value:"群控云机数"}]},phoneNumCount:{index:0,list:[{id:"0",value:"新增云机数"},{id:"1",value:"续费云机数"}]},currentPage:1,totalNum:0,pageSize:6,tableData:[],allList:[],isStart:!1}},mounted:function(){this.publicDataList(),this.tableListFun();var t=document.querySelector(".contentTab").offsetHeight;document.querySelector(".addChart").style.marginTop=t},methods:{handleCurrentChange:function(t){this.currentPage=t,this.tableListFun()},handleSizeChange:function(t){this.pageSize=t,this.tableListFun()},changeDate:function(t){var e=t,a=new Date(e[0]),n=new Date(e[1]);this.time=[a.getTime(),n.getTime()],this.isStart?(this.tableListFun(),this.publicDataList()):this.isStart=!this.isStart},phoneNumTypeChange:function(t){this.phoneNumType.index=t,this.phoneStartChart(this.allList[t])},publicDataList:function(){var t=this,e=new Object;e.startCreateTime=this.time[0],e.endCreateTime=this.time[1],Object(s.i)(e).then(function(e){200==e.code&&(t.allList=e.data,t.phoneStartChart(t.allList[0]),t.numChartFun(t.allList[6]),t.countNum.free=t.allList[0].data.reduce(function(t,e){return t+e}),t.countNum.online=t.allList[1].data.reduce(function(t,e){return t+e}),t.countNum.expire=t.allList[2].data.reduce(function(t,e){return t+e}),t.countNum.fault=t.allList[3].data.reduce(function(t,e){return t+e}),t.countNum.start=t.allList[4].data.reduce(function(t,e){return t+e}),t.countNum.groupControl=t.allList[5].data.reduce(function(t,e){return t+e}))}).catch(function(t){console.log(t)})},phoneStartChart:function(t){var e=this.$echarts.init(document.getElementById("statusChart")),a={grid:{top:"5%",left:"1%",right:"2%",bottom:"8%",containLabel:!0},tooltip:{trigger:"axis"},xAxis:{type:"category",data:t.time},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"云机数",data:t.data,type:"line",itemStyle:{normal:{color:"#409eff",lineStyle:{color:"#409eff"}}}}]};e.setOption(a);var n=document.getElementById("statusChart");i.a.on(n,function(){e.resize()})},exportData:function(){var t=new Object;t.startCreateTime=this.time[0],t.endCreateTime=this.time[1],Object(s.j)(t).then(function(t){var e=new Blob([t],{type:"application/vnd.openxmlformats-  officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a"),n=window.URL.createObjectURL(e);a.href=n,a.download="云机类型数据总数.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}).catch(function(t){console.log(t)})},tableListFun:function(){var t=this,e=new Object;e.startCreateTime=this.time[0],e.endCreateTime=this.time[1],e.currentPage=this.currentPage,e.pageSize=this.pageSize,Object(s.h)(e).then(function(e){200==e.code&&(t.tableData=e.data.list,t.totalNum=e.data.total_number)}).catch(function(t){console.log(t)})},handleChange:function(t){var e="";t.length>0?document.querySelector(".addChart").style.marginTop=e:(document.querySelector(".addChart").style.marginTop="15px",e=document.querySelector(".contentTab").offsetHeight)},phoneNumCountChange:function(t){this.phoneNumCount.index=t,this.numChartFun(this.allList[t+6])},numChartFun:function(t){var e=this.$echarts.init(document.getElementById("numChart")),a={grid:{top:"8%",left:"2%",right:"2%",bottom:"18%",containLabel:!0},tooltip:{trigger:"axis"},xAxis:{type:"category",data:t.time},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"云机数",data:t.data,type:"line",itemStyle:{normal:{color:"#409eff",lineStyle:{color:"#409eff"}}}}]};e.setOption(a);var n=document.getElementById("numChart");i.a.on(n,function(){e.resize()})}},components:{DateSearch:n.a,Pagination:o.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"maxBox"},[a("DateSearch",{on:{func:t.changeDate}}),t._v(" "),a("div",{staticClass:"number"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("空闲云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.free))])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("在线云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.online))])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("到期云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.expire))])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("故障云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.fault))])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("启动云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.start))])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content "},[a("p",[t._v("群控云机数")]),t._v(" "),a("span",[t._v(t._s(t.countNum.groupControl))])])])],1)],1),t._v(" "),a("div",{staticClass:"phoneStatus"},[a("div",{staticClass:"list"},t._l(t.phoneNumType.list,function(e,n){return a("span",{key:e.id,class:t.phoneNumType.index==n?"select":"",on:{click:function(a){return t.phoneNumTypeChange(n,e)}}},[t._v("       \n            "+t._s(e.value)+"    \n             ")])}),0),t._v(" "),a("div",{attrs:{id:"statusChart"}})]),t._v(" "),a("div",{staticClass:"infoTable"},[a("span",{staticClass:"outTable",on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("el-collapse",{on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"收起明细数据",name:"1"}},[a("div",{ref:"contentTab",staticClass:"contentTab"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"create_time",label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.create_time.slice(0,10)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"not_assigned_device_count",label:"空闲云机数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"assigned_device_count",label:"在线云机数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expired_device_count",label:"到期云机数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"error_device_count",label:"故障云机数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"connected_device_count",label:"启动云机数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"group_control_device_count",label:"群控云机数"}})],1),t._v(" "),a("Pagination",{attrs:{total:t.totalNum,currentPage:t.currentPage,isTool:!1},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1)])],1)],1),t._v(" "),a("div",{staticClass:"addChart"},[a("div",{staticClass:"list"},t._l(t.phoneNumCount.list,function(e,n){return a("span",{key:e.id,class:t.phoneNumCount.index==n?"select":"",on:{click:function(a){return t.phoneNumCountChange(n,e)}}},[t._v("       \n            "+t._s(e.value)+"    \n             ")])}),0),t._v(" "),a("div",{attrs:{id:"numChart"}})])],1)},staticRenderFns:[]};var c=a("VU/8")(l,r,!1,function(t){a("3R8T")},"data-v-021f64f6",null);e.default=c.exports},"3R8T":function(t,e){}});
//# sourceMappingURL=14.4f80bc0a2c6e9b129075.js.map