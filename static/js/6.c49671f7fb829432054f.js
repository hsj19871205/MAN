webpackJsonp([6],{RUVC:function(e,t){},byfd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("gz6O"),i=a("0xDb"),s=a("bGai"),o={data:function(){return{padCode:"",userPadName:"",padName:"",telephone:"",serialNum:"",bindBeginTime:"",bindEndTime:"",expireBeginTime:"",expireEndTime:"",padStatusStr:"",statusOptions:[{value:"空闲",label:"空闲"},{value:"在线",label:"在线"},{value:"到期",label:"到期"},{value:"故障",label:"故障"}],isConnect:"",options:[{value:1,label:"是"},{value:0,label:"否"}],tableData:[],currentPage:1,totalNum:0,pageSize:10,columnData:{},updatePadNameVisible:!1,time:"1天",addTimeVisible:!1,phoneNum:"",bindVisible:!1,goodsId:"",goodsList:[]}},mounted:function(){this.getList()},methods:{getTime:function(e){return Object(i.c)(e)},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleSizeChange:function(e){this.pageSize=e,this.getList()},getByteLen:function(e){for(var t=this.padName,a=0,n="",i=0;i<t.length;i++){var s=e.charAt(i);if(null===s.match(/^[A-Za-z0-9_\-~!@#$%^&*()-=?><;'|]+$/)){if((a+=2)>20)break;n+=s}else{if((a+=1)>20)break;n+=s}}this.padName=n},search:function(){this.currentPage=1,this.pageSize=10,this.getList()},reset:function(){this.appName="",this.packageName="",this.telephone="",this.serialNum="",this.padStatusStr="",this.isConnect="",this.currentPage=1,this.pageSize=10,this.$refs.selectBindTime.resetTimes(),this.$refs.selectExpireTime.resetTimes(),this.getList()},selectBindTime:function(e){this.bindBeginTime=e.startTime,this.bindEndTime=e.endTime},selectExpireTime:function(e){this.expireBeginTime=e.startTime,this.expireEndTime=e.endTime},getList:function(){var e=this,t=new Object;t.padCode=this.padCode,t.userPadName=this.userPadName,t.telephone=this.telephone,t.serialNum=this.serialNum,t.padStatusStr=this.padStatusStr,this.bindBeginTime&&(t.bindBeginTime=this.bindBeginTime),this.bindEndTime&&(t.bindEndTime=this.bindEndTime),this.expireBeginTime&&(t.expireBeginTime=this.expireBeginTime),this.expireEndTime&&(t.expireEndTime=this.expireEndTime),t.isConnect=this.isConnect,t.pageNum=this.currentPage,t.pageSize=this.pageSize,Object(n.f)(t).then(function(t){0==t.resultCode&&(e.tableData=t.resultInfo.userPadList,e.totalNum=t.resultInfo.total)}).catch(function(e){console.log(e)})},handleDetail:function(e){this.$store.dispatch("phone/selectedPhone",e),this.$router.push("/phone/phone-detail")},rebootPhone:function(e){var t=this;this.$confirm("确定要重启该云机吗","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.reboot(e)}).catch(function(){})},reboot:function(e){var t=this,a=new Object;a.padCodes=e.pad_code,Object(n.g)(a).then(function(e){0==e.resultCode?t.$message({message:"设备重启中，预计需要1-2分钟",type:"success"}):1==e.res?t.$message({message:e.error,type:"warning"}):t.$message({message:e.resultInfo,type:"warning"})}).catch(function(e){})},resetPhone:function(e){var t=this;this.$confirm("恢复出厂设置，将会清空该云机的所有数据，是否恢复？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.resetPad(e)}).catch(function(){})},resetPad:function(e){var t=this,a=new Object;a.padCodes=e.pad_code,Object(n.i)(a).then(function(e){0==e.resultCode?t.$message({message:"设备重置中，预计需要1-2分钟",type:"success"}):1==e.res?t.$message({message:e.error,type:"warning"}):t.$message({message:e.resultInfo,type:"warning"})}).catch(function(e){})},getGoodsList:function(){var e=this;Object(n.e)().then(function(t){if(0==t.resultCode){var a=[];t.resultInfo.map(function(e){var t={};t.label=e.goods_name,t.value=e.goods_id,a.push(t)}),e.goodsList=a}}).catch(function(e){})},bindPhone:function(e){this.getGoodsList(),this.columnData=e,this.bindVisible=!0},bind:function(){var e=this;if(""!=this.phoneNum)if(/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(this.phoneNum))if(""!=this.goodsId){var t=new Object;t.padId=this.columnData.pad_id,t.goodsId=this.goodsId,t.telephone=this.phoneNum,Object(n.c)(t).then(function(t){0==t.resultCode?e.$message({message:t.resultInfo}):e.$message({message:t.resultInfo,type:"warning"}),e.goodsList(),e.handleModalClose()}).catch(function(e){})}else this.$message({message:"请选择套餐类型!",type:"warning"});else this.$message({message:"请输入正确的手机号",type:"warning"});else this.$message({message:"请输入手机号",type:"warning"})},relievePhone:function(e){var t=this;this.$confirm("确定要解绑该云机？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.relieve(e)}).catch(function(){})},relieve:function(e){var t=this;console.log;var a=new Object;a.padIds=e.pad_id,Object(n.h)(a).then(function(e){0==e.resultCode?t.$message({message:"解绑成功！",type:"success"}):1==e.res?t.$message({message:e.error,type:"warning"}):t.$message({message:e.resultInfo,type:"warning"})}).catch(function(e){})},showEditName:function(e){console.log(e),this.updatePadNameVisible=!0,this.columnData=e,this.padName=e.user_pad_name},handleModalClose:function(){this.updatePadNameVisible=!1,this.addTimeVisible=!1,this.bindVisible=!1,this.columnData="",this.padName="",this.time="1天",this.phoneNum="",this.goodsId=""},editPadName:function(){var e=this;if(""!=this.padName.length)if(/^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/.test(this.padName)){var t=new Object;t.padCode=this.columnData.pad_code,t.userId=this.columnData.user_id,t.padName=this.padName,Object(n.j)(t).then(function(t){0==t.resultCode?(e.$message({message:"修改云机名称成功",type:"success"}),e.getList()):e.$message({message:t.resultInfo,type:"warning"}),e.updatePadNameVisible=!1,e.padName="",e.columnData=""}).catch(function(e){})}else this.$message({message:"设备名称不支持输入特殊字符！",type:"warning"});else this.$message({message:"请输入设备名称!",type:"warning"})},addTime:function(){var e=this,t=new Object;switch(console.log(this.time),this.time){case"1天":t.expireTime=new Date(this.columnData.expire_time).getTime()+864e5;break;case"5天":t.expireTime=new Date(this.columnData.expire_time).getTime()+432e6;break;case"30天":t.expireTime=new Date(this.columnData.expire_time).getTime()+2592e6;break;case"90天":t.expireTime=new Date(this.columnData.expire_time).getTime()+7776e6;break;case"180天":t.expireTime=new Date(this.columnData.expire_time).getTime()+15552e6;break;case"365天":t.expireTime=new Date(this.columnData.expire_time).getTime()+31536e6}t.userId=this.columnData.user_id,t.padCode=this.columnData.pad_code,Object(n.a)(t).then(function(t){0==t.resultCode?(e.$message({message:"延长到期时间成功！",type:"success"}),e.getList()):e.$message({message:t.resultInfo,type:"warning"}),e.addTimeVisible=!1,e.time="1天",e.columnData=null}).catch(function(e){})}},components:{Pagination:s.a,SelectTime:s.b}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrap"},[a("div",{staticClass:"search-wrap"},[a("el-row",{staticStyle:{height:"52px"},attrs:{type:"flex",gutter:10}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("云机编号：")]),e._v(" "),a("el-input",{staticClass:"items",attrs:{placeholder:"请输入云机编号"},model:{value:e.padCode,callback:function(t){e.padCode=t},expression:"padCode"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("云机名称：")]),e._v(" "),a("el-input",{staticClass:"items",attrs:{placeholder:"请输入云机名称"},model:{value:e.userPadName,callback:function(t){e.userPadName=t},expression:"userPadName"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("所属用户：")]),e._v(" "),a("el-input",{staticClass:"items",attrs:{placeholder:"请输入手机号码"},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("序列号：")]),e._v(" "),a("el-input",{staticClass:"items",attrs:{placeholder:"请输入序列号"},model:{value:e.serialNum,callback:function(t){e.serialNum=t},expression:"serialNum"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{height:"52px"},attrs:{type:"flex",gutter:10}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("云机状态：")]),e._v(" "),a("el-select",{staticClass:"items",attrs:{placeholder:"请选择"},model:{value:e.padStatusStr,callback:function(t){e.padStatusStr=t},expression:"padStatusStr"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("连接中：")]),e._v(" "),a("el-select",{staticClass:"items",attrs:{placeholder:"请选择"},model:{value:e.isConnect,callback:function(t){e.isConnect=t},expression:"isConnect"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("绑定时间：")]),e._v(" "),a("SelectTime",{ref:"selectBindTime",staticClass:"items",attrs:{type:"datetimerange"},on:{selectTime:e.selectBindTime}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"item-text"},[e._v("到期时间：")]),e._v(" "),a("SelectTime",{ref:"selectExpireTime",staticClass:"items",attrs:{type:"datetimerange"},on:{selectTime:e.selectExpireTime}})],1),e._v(" "),a("el-button",{staticStyle:{height:"40px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{height:"40px"},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticClass:"table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},border:""}},[a("el-table-column",{attrs:{prop:"pad_code",label:"云机编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_pad_name",label:"云机名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pad_status_str",label:"云机状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bind_mobile",label:"所属用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group_name",label:"所属分组"}}),e._v(" "),a("el-table-column",{attrs:{label:"绑定时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bind_time?e.getTime(new Date(t.row.bind_time)):"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"到期时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.expire_time?e.getTime(new Date(t.row.expire_time)):"-"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"install_app_count",label:"安装应用数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"file_count",label:"文件分发数"}}),e._v(" "),a("el-table-column",{attrs:{label:"连接中"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(2==t.row.pad_status?"是":"否"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("查看")]),e._v(" "),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                                    更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("p",{on:{click:function(a){return e.rebootPhone(t.row)}}},[e._v("重启云机")])]),e._v(" "),a("el-dropdown-item",[a("p",{on:{click:function(a){return e.resetPhone(t.row)}}},[e._v("恢复出厂")])]),e._v(" "),a("el-dropdown-item",[a("p",[e._v("连接云机")])]),e._v(" "),a("el-dropdown-item",[a("p",{on:{click:function(a){return e.showEditName(t.row)}}},[e._v("修改云机名")])]),e._v(" "),a("el-dropdown-item",[a("p",{on:{click:function(a){return e.bindPhone(t.row)}}},[e._v("设备绑定")])]),e._v(" "),a("el-dropdown-item",[a("p",{on:{click:function(a){return e.relievePhone(t.row)}}},[e._v("设备解绑")])]),e._v(" "),a("el-dropdown-item",[a("p",{on:{click:function(a){e.addTimeVisible=!0,e.columnData=t.row}}},[e._v("延长到期时间")])])],1)],1)]}}])})],1),e._v(" "),a("Pagination",{staticStyle:{margin:"10px 0 20px 0","text-align":"right"},attrs:{total:e.totalNum,currentPage:e.currentPage,pageSize:e.pageSize},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改云机名","before-close":e.handleModalClose,visible:e.updatePadNameVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.updatePadNameVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入云机名",autocomplete:"off"},on:{input:e.getByteLen},model:{value:e.padName,callback:function(t){e.padName=t},expression:"padName"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleModalClose()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editPadName()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"绑定云机","before-close":e.handleModalClose,visible:e.bindVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.bindVisible=t}}},[a("el-row",{staticStyle:{height:"52px"}},[a("el-col",[a("span",{staticClass:"item-text"},[e._v("手机号:")]),e._v(" "),a("el-input",{staticClass:"items",attrs:{placeholder:"请输入手机号",autocomplete:"off"},on:{input:e.getByteLen},model:{value:e.phoneNum,callback:function(t){e.phoneNum=t},expression:"phoneNum"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{height:"52px"}},[a("el-col",[a("span",{staticClass:"item-text"},[e._v("设备绑定:")]),e._v(" "),a("el-select",{staticClass:"items",attrs:{placeholder:"请选择套餐类型"},model:{value:e.goodsId,callback:function(t){e.goodsId=t},expression:"goodsId"}},e._l(e.goodsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleModalClose()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.bind()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"延长到期时间","before-close":e.handleModalClose,visible:e.addTimeVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.addTimeVisible=t}}},[a("el-radio-group",{model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},[a("el-radio-button",{attrs:{label:"1天"}}),e._v(" "),a("el-radio-button",{attrs:{label:"5天"}}),e._v(" "),a("el-radio-button",{attrs:{label:"30天"}}),e._v(" "),a("el-radio-button",{attrs:{label:"90天"}}),e._v(" "),a("el-radio-button",{attrs:{label:"180天"}}),e._v(" "),a("el-radio-button",{attrs:{label:"365天"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleModalClose()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTime()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(e){a("RUVC")},"data-v-62d22ba0",null);t.default=r.exports},gz6O:function(e,t,a){"use strict";a.d(t,"f",function(){return s}),a.d(t,"j",function(){return o}),a.d(t,"e",function(){return l}),a.d(t,"c",function(){return r}),a.d(t,"h",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"g",function(){return d}),a.d(t,"i",function(){return p}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return h});var n=a("vLgD"),i=a("gyMJ"),s=function(e){return Object(n.a)(i.a+"/pad/search",e).then(function(e){return e.data})},o=function(e){return Object(n.a)(i.a+"/pad/updateUserPadName",e).then(function(e){return e.data})},l=function(e){return Object(n.a)(i.a+"/goods/list",e).then(function(e){return e.data})},r=function(e){return Object(n.a)(i.a+"/pad/bind",e).then(function(e){return e.data})},c=function(e){return Object(n.a)(i.a+"/pad/relieve",e).then(function(e){return e.data})},u=function(e){return Object(n.a)(i.a+"/pad/addExpireTime",e).then(function(e){return e.data})},d=function(e){return Object(n.a)(i.a+"/pad/rebootPads",e).then(function(e){return e.data})},p=function(e){return Object(n.a)(i.a+"/pad/resetPads",e).then(function(e){return e.data})},m=function(e){return Object(n.a)(i.a+"/deviceDetail/baseInfo",e).then(function(e){return e.data})},h=function(e){return Object(n.a)(i.a+"/deviceDetail/detailInfo",e).then(function(e){return e.data})}}});
//# sourceMappingURL=6.c49671f7fb829432054f.js.map